const sizeCharts = {
  NikeM: {
    UK: [
      "3",
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "14.5",
      "15",
      "15.5",
      "16",
      "16.5",
      "17",
      "17.5",
      "18",
      "18.5",
      "19",
      "19.5",
      "20",
      "20.5",
      "21",
    ],
    EU: [
      "35.5",
      "36",
      "36.5",
      "37.5",
      "38",
      "38.5",
      "39",
      "40",
      "40.5",
      "41",
      "42",
      "42.5",
      "43",
      "44",
      "44.5",
      "45",
      "45.5",
      "46",
      "47",
      "47.5",
      "48",
      "48.5",
      "49",
      "49.5",
      "50",
      "50.5",
      "51",
      "51.5",
      "52",
      "52.5",
      "53",
      "53.5",
      "54",
      "54.5",
      "55",
      "55.5",
      "56",
      "56.5",
    ],
    USM: [
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "14.5",
      "15",
      "15.5",
      "16",
      "16.5",
      "17",
      "17.5",
      "18",
      "18.5",
      "19",
      "19.5",
      "20",
      "20.5",
      "21",
      "21.5",
      "22",
    ],
    USW: [
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "14.5",
      "15",
      "15.5",
      "16",
      "16.5",
      "17",
      "17.5",
      "18",
      "18.5",
      "19",
      "19.5",
      "20",
      "20.5",
      "21",
      "21.5",
      "22",
      "22.5",
      "23",
      "23.5",
    ],
    CM: [
      "21.6",
      "22",
      "22.4",
      "22.9",
      "23.3",
      "23.7",
      "24.1",
      "24.5",
      "25",
      "25.4",
      "25.8",
      "26.2",
      "26.7",
      "27.1",
      "27.5",
      "27.9",
      "28.3",
      "28.8",
      "29.2",
      "29.6",
      "30",
      "30.5",
      "30.9",
      "31.3",
      "31.7",
      "32.2",
      "32.6",
      "33",
      "33.4",
      "33.9",
      "34.3",
      "34.7",
      "35.1",
      "35.5",
      "36",
      "36.4",
      "36.8",
      "37.2",
    ],
  },
  NikeW: {
    UK: [
      "1.5",
      "1.5",
      "2",
      "2.5",
      "3",
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "14.5",
      "15",
      "15.5",
      "16",
      "16.5",
      "17",
      "17.5",
      "18",
      "18.5",
      "19",
      "19.5",
      "20",
    ],
    EU: [
      "33.5",
      "34.5",
      "35",
      "35.5",
      "36",
      "36.5",
      "37.5",
      "38",
      "38.5",
      "39",
      "40",
      "40.5",
      "41",
      "42",
      "42.5",
      "43",
      "44",
      "44.5",
      "45",
      "45.5",
      "46",
      "47",
      "47.5",
      "48",
      "48.5",
      "49",
      "50",
    ],
    USM: [
      "2",
      "2.5",
      "3",
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "14.5",
      "15",
      "15.5",
      "16",
      "16.5",
      "17",
      "17.5",
      "18",
      "18.5",
      "19",
      "19.5",
      "20",
    ],
    USW: [
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "14.5",
      "15",
      "15.5",
      "16",
      "16.5",
      "17",
      "17.5",
      "18",
      "18.5",
      "19",
      "19.5",
      "20",
      "20.5",
      "21",
      "21.5",
      "22",
    ],
    CM: [
      "20.8",
      "21.2",
      "21.6",
      "22",
      "22.4",
      "22.9",
      "23.3",
      "23.7",
      "24.1",
      "24.5",
      "25",
      "25.4",
      "25.8",
      "26.2",
      "26.7",
      "27.1",
      "27.5",
      "27.9",
      "28.3",
      "28.8",
      "29.2",
      "29.6",
      "30",
      "30.5",
      "30.9",
      "31.3",
      "31.7",
      "32.2",
    ],
  },

  NikeGS: {
    UK: [
      "13.5",
      "1",
      "1.5",
      "2",
      "2.5",
      "3",
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6",
    ],
    EU: [
      "32",
      "33",
      "33.5",
      "34",
      "35",
      "35.5",
      "36",
      "36.5",
      "37.5",
      "38",
      "38.5",
      "39",
      "40",
    ],
    USM: [
      "1Y",
      "1.5Y",
      "2Y",
      "2.5Y",
      "3Y",
      "3.5Y",
      "4Y",
      "4.5Y",
      "5Y",
      "5.5Y",
      "6Y",
      "6.5Y",
      "7Y",
    ],
    CM: [
      "20.1",
      "20.5",
      "20.9",
      "21.4",
      "21.8",
      "22.2",
      "22.4",
      "22.7",
      "23.2",
      "23.5",
      "23.8",
      "24.3",
      "24.6",
    ],
  },
  Adidas: {
    EU: [
      "36",
      "36 2/3",
      "37 1/3",
      "38",
      "38 2/3",
      "39 1/3",
      "40",
      "40 2/3",
      "41 1/3",
      "42",
      "42 2/3",
      "43 1/3",
      "44",
      "44 2/3",
      "45 1/3",
      "46",
      "46 2/3",
      "47 1/3",
    ],
    UK: [
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
    ],
    USM: [
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
    ],
    USW: [
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
    ],
    CM: [
      "22.1",
      "22.5",
      "22.9",
      "23.3",
      "23.8",
      "24.2",
      "24.6",
      "25.0",
      "25.5",
      "25.9",
      "26.3",
      "26.7",
      "27.1",
      "27.6",
      "28.0",
      "28.4",
      "28.8",
      "29.3",
    ],
  },

  VansM: {
    EU: [
      "34.5",
      "35",
      "36",
      "36.5",
      "37",
      "38",
      "38.5",
      "39",
      "40",
      "40.5",
      "41",
      "42",
      "42.5",
      "43",
      "44",
      "44.5",
      "45",
      "46",
      "47",
      "48",
      "49",
      "50",
    ],
    UK: [
      "2.5",
      "3",
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "12",
      "13",
      "14",
      "15",
    ],
    USM: [
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "13",
      "14",
      "15",
      "16",
    ],
    USW: [
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "14.5",
      "15",
      "15.5",
    ],
    CM: [
      "21.5",
      "22",
      "22.5",
      "23",
      "23.5",
      "24",
      "24.5",
      "25",
      "25.5",
      "26",
      "26.5",
      "27",
      "27.5",
      "28",
      "28.5",
      "29",
      "29.5",
      "30",
      "31",
      "32",
      "33",
      "34",
    ],
  },
  VansW: {
    UK: [
      "2.5",
      "3",
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "12",
      "13",
      "14",
      "15",
    ],
    EU: [
      "34.5",
      "35",
      "36",
      "36.5",
      "37",
      "38",
      "38.5",
      "39",
      "40",
      "40.5",
      "41",
      "42",
      "42.5",
      "43",
      "44",
      "44.5",
      "45",
      "46",
      "47",
      "48",
      "49",
      "50",
    ],
    USM: [
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "13",
      "14",
      "15",
      "16",
    ],
    USW: [
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "14.5",
      "15",
      "15.5",
    ],
    CM: [
      "21.5",
      "22",
      "22.5",
      "23",
      "23.5",
      "24",
      "24.5",
      "25",
      "25.5",
      "26",
      "26.5",
      "27",
      "27.5",
      "28",
      "28.5",
      "29",
      "29.5",
      "30",
      "31",
      "32",
      "33",
      "34",
    ],
  },
  VansGS: {
    UK: ["2.5", "3", "3.5", "4", "4.5", "5", "5.5", "6"],
    EU: ["34.5", "35", "36", "36.5", "37", "38", "38.5", "39"],
    US: ["3.5", "4", "4.5", "5", "5.5", "6", "6.5", "7"],
    CM: ["21.5", "22", "22.5", "23", "23.5", "24", "24.5", "25"],
  },
  NewBalanceM: {
    UK: [
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
    ],
    EU: [
      "36",
      "37",
      "37.5",
      "38",
      "38.5",
      "39.5",
      "40",
      "40.5",
      "41.5",
      "42",
      "42.5",
      "43",
      "44",
      "44.5",
      "45",
      "45.5",
      "46.5",
      "47",
      "47.5",
    ],
    USM: [
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
    ],
    USW: [
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "15",
    ],
    CM: [
      "22",
      "22.5",
      "23",
      "23.5",
      "24",
      "24.5",
      "25",
      "25.5",
      "26",
      "26.5",
      "27",
      "27.5",
      "28",
      "28.5",
      "29",
      "29.5",
      "30",
      "30.5",
      "31",
    ],
  },
  NewBalanceW: {
    UK: [
      "2",
      "2.5",
      "3",
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "13",
    ],
    EU: [
      "34",
      "34.5",
      "35",
      "36",
      "36.5",
      "37",
      "37.5",
      "38",
      "39",
      "40",
      "40.5",
      "41",
      "41.5",
      "42.5",
      "43",
      "43.5",
      "44",
      "45",
      "45.5",
      "46",
      "46.5",
      "47",
      "48",
    ],
    USM: [
      "2.5",
      "3",
      "3.5",
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
    ],
    USW: [
      "4",
      "4.5",
      "5",
      "5.5",
      "6",
      "6.5",
      "7",
      "7.5",
      "8",
      "8.5",
      "9",
      "9.5",
      "10",
      "10.5",
      "11",
      "11.5",
      "12",
      "12.5",
      "13",
      "13.5",
      "14",
      "15",
    ],
    CM: [
      "21",
      "21.5",
      "22",
      "22.5",
      "23",
      "23.5",
      "24",
      "24.5",
      "25",
      "25.5",
      "26",
      "26.5",
      "27",
      "27.5",
      "28",
      "28.5",
      "29",
      "29.5",
      "30",
      "30.5",
      "31",
      "32",
    ],
  },
};

// Example usage:
function convertSize(brand, system, size) {
  // Normalize input size (handle fractions and decimals)
  const normalizedInput = size
    .toString()
    .replace(/(\d+)\s+(\d)\/(\d)/g, (_, whole, num, denom) =>
      (parseInt(whole) + parseInt(num) / parseInt(denom)).toFixed(2)
    )
    .replace(/⅔/g, ".67")
    .replace(/⅓/g, ".33");

  if (system == "USW" && brand == "NikeGS") {
    system = "USM";
  }
  const chart = sizeCharts[brand];
  if (!chart) return null;

  const sizes = chart[system];
  if (!sizes) return null;

  // Find index of matching size (with tolerance for floating point)
  const index = sizes.findIndex((s) => {
    const normalizedChart = s
      .toString()
      .replace(/(\d+)\s+(\d)\/(\d)/g, (_, whole, num, denom) =>
        (parseInt(whole) + parseInt(num) / parseInt(denom)).toFixed(2)
      )
      .replace(/⅔/g, ".67")
      .replace(/⅓/g, ".33");

    return (
      Math.abs(parseFloat(normalizedChart) - parseFloat(normalizedInput)) < 0.01
    );
  });

  if (index === -1) return null;

  // Return all equivalent sizes
  const result = { brand };
  Object.keys(chart).forEach((sys) => {
    if (chart[sys][index] !== undefined) {
      result[sys] = chart[sys][index];
    }
  });

  return result;
}

// Convert Nike EU 40 to US Men's

window.onload = function () {
  var size = document.getElementById("size");

  var sizeRegion = document.getElementById("sizeRegion");

  var manufacturer = document.getElementById("manufacturer");

  var resultTable = document.getElementById("resultTable");
  var euSizeResult = document.getElementById("EuSizeResult");
  var ukSizeResult = document.getElementById("UkSizeResult");
  var usMSizeResult = document.getElementById("USMSizeResult");
  var usWSizeResult = document.getElementById("USWSizeResult");
  var cmSizeResult = document.getElementById("CmSizeResult");

  const form = document.getElementById("autoSubmitForm");

  form.addEventListener("submit", function (e) {
    e.preventDefault();
    var sizeValue = size.value;
    var sizeRegionValue = sizeRegion.value;
    var manufacturerValue = manufacturer.value;

    var convertedSize = convertSize(
      manufacturerValue,
      sizeRegionValue,
      sizeValue
    );
    console.log(convertedSize);
    if (convertedSize !== null) {
      resultTable.style.display = "table";
      euSizeResult.textContent = convertedSize.EU || "-";
      ukSizeResult.textContent = convertedSize.UK || "-";
      usMSizeResult.textContent = convertedSize.USM || "-";
      usWSizeResult.textContent = convertedSize.USW || "-";
      cmSizeResult.textContent = convertedSize.CM || "-";
    } else {
      resultTable.style.display = "table";
    }
  });
};
